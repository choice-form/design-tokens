// ============================================================================
// Radius 圆角函数库
// ============================================================================

@use "sass:map";
@use "sass:meta";
@use "../tokens/radius" as radius-tokens;
@use "../css-variables/config" as css-vars;

/// 获取 radius 值的辅助函数
/// @param {String} $name - radius 名称
/// @return {Length} radius 值
/// @access private
@function _get-radius-value($name) {
  @if map.has-key(radius-tokens.$radius-values, $name) {
    @return map.get(radius-tokens.$radius-values, $name);
  }

  @error "Unknown radius name: '#{$name}'. Available radius names: #{map.keys(radius-tokens.$radius-values)}";
}

/// 获取 radius 值
/// @param {String} $name - radius 名称
/// @param {Boolean} $as-var - 是否返回 CSS 变量，默认 true
/// @return {String|Length} radius 值或 CSS 变量
/// @example scss - 基本用法
///   .card {
///     border-radius: radius("sm");
///   }
/// @example scss - 使用具体值
///   .button {
///     border-radius: radius("sm", false);
///   }
@function radius($name, $as-var: true) {
  // 如果请求 CSS 变量，直接返回
  @if $as-var {
    @return var(--#{css-vars.$css-var-prefix}radius-#{$name});
  }

  // 检查 radius 是否存在
  @if not map.has-key(radius-tokens.$radius-values, $name) {
    @error "Unknown radius name: '#{$name}'. Available radius names: #{map.keys(radius-tokens.$radius-values)}";
  }

  // 返回具体值
  @return _get-radius-value($name);
}

/// 获取所有可用的 radius 名称
/// @return {List} radius 名称列表
/// @example scss - 使用示例
///   @debug radius-names(); // 输出所有可用的 radius 名称
@function radius-names() {
  @return map.keys(radius-tokens.$radius-values);
}

/// 检查 radius 名称是否存在
/// @param {String} $name - radius 名称
/// @return {Boolean} 是否存在
/// @example scss - 使用示例
///   @if radius-exists("sm") {
///     .card { border-radius: radius("sm"); }
///   }
@function radius-exists($name) {
  @return map.has-key(radius-tokens.$radius-values, $name);
}
